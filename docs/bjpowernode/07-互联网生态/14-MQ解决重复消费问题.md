---
sidebar_label: 14. MQ解决重复消费问题
---

# MQ解决重复消费问题

## 1 简介
1. 幂等性：任意多次执行所产生的影响均与一次执行产生的影响相同
    1. 前端表单重复提交
    2. 接口调用重试
    3. 消息重复消费
2. RPC重复调用解决方案：
    ```mermaid
    graph TB
    record[记录请求的特征（IP、方法、参数等）与时间] --> 生成唯一标识 --> 去重并存储
    ```
3. MQ消息重复：
    1. 问题：生产者重复投递消息，或是消费者重复消费消息
    2. 解决方案：
        ```mermaid
        graph TB
        生产者发送消息时携带唯一标识 --> consume[消费者消费时判断标记是否存在] --存在--> 不消费
        consume --不存在--> 消费消息后记录唯一标识至容器
        ```